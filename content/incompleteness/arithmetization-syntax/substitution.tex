% Part: incompleteness
% Chapter: arithmetization-syntax
% Section: substitution

\documentclass[../../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{inc}{art}{sub}
\olsection{Substitution}

Recall that substitution is the operation of replacing all free
occurrences of !!a{variable}~$u$ in !!a{formula}~$!A$ by a term~$t$,
written $\Subst{!A}{t}{u}$. This operation, when carried out on
G\"odel numbers of !!{variable}s, !!{formula}s, and terms, is
primitive recursive.

\begin{prop}\ollabel{prop:subst-primrec}
There is a primitive recursive function $\fn{Subst}(x, y, z)$ with the
property that
\[
\fn{Subst}(\Gn{!A}, \Gn{t}, \Gn{u}) = \Gn{\Subst{!A}{t}{u}}.
\]
\end{prop}

\begin{proof}
We can then define a function $\fn{hSubst}$ by primitive recursion as
follows:
\begin{multline*}
\begin{aligned}
\fn{hSubst}(x, y, z, 0) & = \emptyseq \\
\fn{hSubst}(x, y, z, i+1) & =
\end{aligned}\\
\begin{cases}
\fn{hSubst}(x, y, z, i) \concat y & \text{if $\fn{FreeOcc}(x, z, i)$} \\
\fn{append}(\fn{hSubst}(x, y, z, i), (x)_{i}) & \text{otherwise.}
\end{cases}
\end{multline*}
$\fn{Subst}(x, y, z)$ can now be defined as $\fn{hSubst}(x, y, z, \len{x})$.
\end{proof}

\begin{prop}
\ollabel{prop:free-for}
The relation $\fn{FreeFor}(x, y, z)$, which holds iff the term with
G\"odel number~$y$ is !!{free for} the variable with G\"odel
number~$z$ in the formula with G\"odel number~$x$, is primitive
recursive.
\end{prop}

\begin{proof} Exercise. \end{proof}

\begin{prob}
Prove \olref[inc][art][sub]{prop:free-for}
\end{prob}

\end{document}
